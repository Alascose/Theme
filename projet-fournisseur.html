<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Fournisseurs</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container-fluid d-flex my-2 w-100">
        <div class="sidebar  ms-2 my-2" style="background-color: rgb(5, 83, 156); width: 230px; 
        border-top-left-radius: 10px; border-bottom-left-radius: 10px; height: 600px;">
        <ul class="list-unstyled ms-3 mt-3">
            <li class="d-flex mt-5 my-4">
                <span class="mx-2 mt-2"><img src="images/home_16px.png" alt=""></span>
                <a href="projet-index.html" class="text-white mt-1">Accueil</a>
            </li>
            <li class="d-flex mt-2">
                <span class="mx-2 mt-2"><img src="images/scan_stock_16px.png" alt=""></span>
                <a href="projet-stocks.html" class="text-white mt-1">Stocks</a>
            </li>
            <li class="my-4 d-flex">
                <span class="mx-2 mt-2"><img src="images/sell_16px.png" alt="" class=""></span>
                <a href="projet-vente.html" class="text-white mt-1">Ventes</a>
            </li>
            <li class="my-4 d-flex">
              <span class="mx-2 mt-2"><img src="images/reception_16px.png" alt="" class=""></span>
              <a href="projet-clients.html" class="text-white mt-1">Clients</a>
          </li>
            <li class="my-4 d-flex">
              <span class="mx-2 mt-2"><img src="images/online_money_transfer_16px.png" alt="" class=""></span>
              <a href="projet-finance.html" class="text-white mt-1">Finances</a>
          </li>
            <li class="my-4 d-flex">
                <span class="mx-2 mt-2"><img src="images/user_groups_16px.png" alt="" class=""></span>
                <a href="projet-employeur.html" class="text-white mt-1">Employers</a>
            </li>
            <li class="my-4 d-flex">
              <span class="mx-2 mt-2"><img src="images/buy_16px.png" alt="" class=""></span>
              <a href="projet-fournisseur.html" class="text-white mt-1">Fournisseur</a>
          </li>
            <li class="my-4 d-flex">
                <span class="mx-2 mt-2"><img src="images/settings_16px.png" alt="" class=""></span>
                <a href="#" class="text-white mt-1">paramètre</a>
            </li>
        </ul>
    </div>
    <div class="flex-grow-1 my-2 me-2" style="background-color: rgba(214, 210, 220, 0.539); border-top-right-radius: 10px; border-bottom-right-radius: 10px;">
        <header class="shadow-lg py-2 mx-3 mt-3">
            <h2 class="text-center my-1">Gestion des Fournisseurs</h2>
        </header>
        <!-- Navigation des onglets -->
        <ul class="nav nav-tabs my-3 ms-3" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="list-tab" data-bs-toggle="tab" data-bs-target="#list" type="button" role="tab" aria-controls="list" aria-selected="true">Liste des Fournisseurs</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="add-tab" data-bs-toggle="tab" data-bs-target="#add" type="button" role="tab" aria-controls="add" aria-selected="false">Ajouter un Fournisseur</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button" role="tab" aria-controls="history" aria-selected="false">Historique des Transactions</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="notification-tab" data-bs-toggle="tab" data-bs-target="#notification" type="button" role="tab" aria-controls="notification" aria-selected="false">Notifications</button>
            </li>
        </ul>

        <!-- Contenu des onglets -->
        <div class="tab-content" id="myTabContent">
            <!-- Liste des Fournisseurs -->
            <div class="tab-pane fade show active" id="list" role="tabpanel" aria-labelledby="list-tab">
                <div class="mt-4 mx-3">
                    <input class="form-control mb-3" id="searchSupplier" type="text" placeholder="Rechercher un fournisseur...">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Email</th>
                                <th>Téléphone</th>
                                <th>Adresse</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="supplierList">
                            <!-- Les lignes de fournisseurs seront insérées ici dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ajouter un Nouveau Fournisseur -->
            <div class="tab-pane fade" id="add" role="tabpanel" aria-labelledby="add-tab">
                <div class="mt-4 ms-3">
                    <form id="addSupplierForm">
                        <div class="mb-3">
                            <label for="supplierName" class="form-label">Nom</label>
                            <input type="text" class="form-control w-75" id="supplierName" required>
                        </div>
                        <div class="mb-3">
                            <label for="supplierEmail" class="form-label">Email</label>
                            <input type="email" class="form-control w-75" id="supplierEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="supplierPhone" class="form-label">Téléphone</label>
                            <input type="tel" class="form-control w-75" id="supplierPhone" required>
                        </div>
                        <div class="mb-3">
                            <label for="supplierAddress" class="form-label">Adresse</label>
                            <input type="text" class="form-control w-75" id="supplierAddress" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Ajouter</button>
                    </form>
                </div>
            </div>

            <!-- Historique des Transactions -->
            <div class="tab-pane fade" id="history" role="tabpanel" aria-labelledby="history-tab">
                <div class="mt-4 ms-3 w-75">
                    <form id="addTransactionForm">
                        <div class="mb-3">
                            <label for="transactionSupplier" class="form-label">Fournisseur</label>
                            <select class="form-select" id="transactionSupplier" required>
                                <!-- Les options des fournisseurs seront insérées ici dynamiquement -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="transactionDetails" class="form-label">Détails</label>
                            <input type="text" class="form-control" id="transactionDetails" required>
                        </div>
                        <div class="mb-3">
                            <label for="transactionDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="transactionDate" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Ajouter</button>
                    </form>
                    <hr>
                    <ul class="list-group" id="transactionHistory">
                        <!-- Les transactions seront insérées ici dynamiquement -->
                    </ul>
                </div>
            </div>

            <!-- Notifications -->
            <div class="tab-pane fade" id="notification" role="tabpanel" aria-labelledby="notification-tab">
                <div class="mt-4 ms-3 w-75">
                    <form id="sendNotificationForm">
                        <div class="mb-3">
                            <label for="notificationMessage" class="form-label">Message</label>
                            <textarea class="form-control" id="notificationMessage" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Envoyer</button>
                    </form>
                </div>
            </div>
        </div>

    <!-- Modal de confirmation de suppression -->
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmDeleteModalLabel">Confirmer la suppression</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Êtes-vous sûr de vouloir supprimer ce fournisseur ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteButton">Supprimer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de modification des informations -->
    <div class="modal fade" id="editSupplierModal" tabindex="-1" aria-labelledby="editSupplierModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSupplierModalLabel">Modifier les informations du fournisseur</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editSupplierForm">
                        <input type="hidden" id="editSupplierId">
                        <div class="mb-3">
                            <label for="editSupplierName" class="form-label">Nom</label>
                            <input type="text" class="form-control" id="editSupplierName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editSupplierEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="editSupplierEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="editSupplierPhone" class="form-label">Téléphone</label>
                            <input type="tel" class="form-control" id="editSupplierPhone" required>
                        </div>
                        <div class="mb-3">
                            <label for="editSupplierAddress" class="form-label">Adresse</label>
                            <input type="text" class="form-control" id="editSupplierAddress" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Modifier</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    <script src="css/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const suppliers = [];
            const transactions = [];
            let supplierToDelete = null;

            function renderSuppliers() {
                const supplierList = document.getElementById("supplierList");
                supplierList.innerHTML = "";
                suppliers.forEach(supplier => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${supplier.name}</td>
                        <td>${supplier.email}</td>
                        <td>${supplier.phone}</td>
                        <td>${supplier.address}</td>
                        <td>
                            <button class="btn btn-warning btn-sm me-2" onclick="editSupplier(${supplier.id})">Modifier</button>
                            <button class="btn btn-danger btn-sm" onclick="confirmDeleteSupplier(${supplier.id})">Supprimer</button>
                        </td>
                    `;
                    supplierList.appendChild(row);
                });

                const transactionSupplier = document.getElementById("transactionSupplier");
                transactionSupplier.innerHTML = "<option value='' selected disabled>Choisir un fournisseur</option>";
                suppliers.forEach(supplier => {
                    const option = document.createElement("option");
                    option.value = supplier.id;
                    option.textContent = supplier.name;
                    transactionSupplier.appendChild(option);
                });
            }

            function renderTransactions() {
                const transactionHistory = document.getElementById("transactionHistory");
                transactionHistory.innerHTML = "";
                transactions.forEach(transaction => {
                    const item = document.createElement("li");
                    item.className = "list-group-item";
                    const supplier = suppliers.find(s => s.id === transaction.supplierId);
                    item.textContent = `${transaction.date}: ${transaction.details} (Fournisseur: ${supplier ? supplier.name : 'Inconnu'})`;
                    transactionHistory.appendChild(item);
                });
            }

            const addSupplierForm = document.getElementById("addSupplierForm");
            addSupplierForm.addEventListener("submit", function (e) {
                e.preventDefault();
                const newSupplier = {
                    id: suppliers.length + 1,
                    name: document.getElementById("supplierName").value,
                    email: document.getElementById("supplierEmail").value,
                    phone: document.getElementById("supplierPhone").value,
                    address: document.getElementById("supplierAddress").value
                };
                suppliers.push(newSupplier);
                renderSuppliers();
                addSupplierForm.reset();
                const tabTrigger = new bootstrap.Tab(document.querySelector('#list-tab'));
                tabTrigger.show();
            });

            const addTransactionForm = document.getElementById("addTransactionForm");
            addTransactionForm.addEventListener("submit", function (e) {
                e.preventDefault();
                const newTransaction = {
                    supplierId: parseInt(document.getElementById("transactionSupplier").value),
                    details: document.getElementById("transactionDetails").value,
                    date: document.getElementById("transactionDate").value
                };
                transactions.push(newTransaction);
                renderTransactions();
                addTransactionForm.reset();
            });

            window.confirmDeleteSupplier = function (id) {
                supplierToDelete = id;
                const confirmDeleteModal = new bootstrap.Modal(document.getElementById("confirmDeleteModal"));
                confirmDeleteModal.show();
            };

            document.getElementById("confirmDeleteButton").addEventListener("click", function () {
                suppliers.splice(suppliers.findIndex(supplier => supplier.id === supplierToDelete), 1);
                renderSuppliers();
                const confirmDeleteModal = bootstrap.Modal.getInstance(document.getElementById("confirmDeleteModal"));
                confirmDeleteModal.hide();
            });

            window.editSupplier = function (id) {
                const supplier = suppliers.find(supplier => supplier.id === id);
                document.getElementById("editSupplierId").value = supplier.id;
                document.getElementById("editSupplierName").value = supplier.name;
                document.getElementById("editSupplierEmail").value = supplier.email;
                document.getElementById("editSupplierPhone").value = supplier.phone;
                document.getElementById("editSupplierAddress").value = supplier.address;
                const editSupplierModal = new bootstrap.Modal(document.getElementById("editSupplierModal"));
                editSupplierModal.show();
            };

            const editSupplierForm = document.getElementById("editSupplierForm");
            editSupplierForm.addEventListener("submit", function (e) {
                e.preventDefault();
                const id = parseInt(document.getElementById("editSupplierId").value);
                const supplier = suppliers.find(supplier => supplier.id === id);
                supplier.name = document.getElementById("editSupplierName").value;
                supplier.email = document.getElementById("editSupplierEmail").value;
                supplier.phone = document.getElementById("editSupplierPhone").value;
                supplier.address = document.getElementById("editSupplierAddress").value;
                renderSuppliers();
                const editSupplierModal = bootstrap.Modal.getInstance(document.getElementById("editSupplierModal"));
                editSupplierModal.hide();
            });

            const sendNotificationForm = document.getElementById("sendNotificationForm");
            sendNotificationForm.addEventListener("submit", function (e) {
                e.preventDefault();
                const message = document.getElementById("notificationMessage").value;
                alert(`Notification envoyée : ${message}`);
                sendNotificationForm.reset();
            });
        });
    </script>
</body>

</html>
